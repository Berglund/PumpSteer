type: entities
title: PumpSteer Controls
show_header_toggle: false
entities:
  - entity: input_number.pumpsteer_aggressiveness
    name: Aggressiveness (0â€“5)
  - entity: input_number.indoor_target_temperature
    name: Target Temperature
  - entity: input_number.pumpsteer_summer_threshold
    name: Summer Mode Threshold
  - entity: number.ohmigohass_temperature
    secondary_info: last-changed
  - entity: input_number.house_inertia
    secondary_info: last-changed
  - entity: input_text.hourly_forecast_temperatures
    name: Forecast Data (raw)
    secondary_info: last-updated
  - entity: sensor.pumpsteer
    secondary_info: last-changed
  - entity: sensor.temperatur_nu
    secondary_info: last-changed
  - entity: sensor.temp_hall_nere_temperature
    secondary_info: last-changed
  - entity: sensor.pumpsteer_operating_mode
  - entity: sensor.pumpsteer_indoor_target_diff
  - entity: sensor.pumpsteer_outdoor_target_diff

  ###############################################

  type: entities
title: PumpSteer Controls
show_header_toggle: false
entities:
  - entity: sensor.pumpsteer
  - entity: sensor.pumpsteer_future_strategy

  ################################################

type: markdown
content: |2
    ### ðŸ§  PumpSteer Status

    **LÃ¤ge:** {{ state_attr('sensor.pumpsteer', 'LÃ¤ge') }}
    **Inne (verklig):** {{ state_attr('sensor.pumpsteer', 'Inne (verklig)') }} Â°C  
    **Inne (mÃ¥l):** {{ state_attr('sensor.pumpsteer', 'Inne (mÃ¥l)') }} Â°C  
    **Ute (verklig):** {{ state_attr('sensor.pumpsteer', 'Ute (verklig)') }} Â°C  
    **Aggressivitet:** {{ state_attr('sensor.pumpsteer', 'Aggressivitet') }}  
    **SommartrÃ¶skel:** {{ state_attr('sensor.pumpsteer', 'SommartrÃ¶skel') }} Â°C  
    **Pre-boost aktiv:** {{ state_attr('sensor.pumpsteer', 'Pre-boost Aktiv') }}


##################################################

type: markdown
title: ðŸ”® PumpSteer â€“ Forecast Strategy
content: >
  **Strategy Status:** `{{ states('sensor.pumpsteer_future_strategy') }}`

  **Preboost in:** `{{ state_attr('sensor.pumpsteer_future_strategy',
  'preboost_expected_in_hours') }}h`

  **First preboost hour:** `{{ state_attr('sensor.pumpsteer_future_strategy',
  'first_preboost_hour') or 'â€“' }}`

  **Cold + expensive hours (next 6h):** `{{
  state_attr('sensor.pumpsteer_future_strategy',
  'cold_and_expensive_hours_next_6h') }}`

  **Expensive hours (next 6h):** `{{
  state_attr('sensor.pumpsteer_future_strategy', 'expensive_hours_next_6h') }}`

  **Braking threshold:** `{{ state_attr('sensor.pumpsteer_future_strategy',
  'braking_price_threshold_percent') }}%`

  **Preboost threshold:** `{{ state_attr('sensor.pumpsteer_future_strategy',
  'preboost_price_threshold_percent') }}%`


  ---

  ðŸ§  **Inertia:** `{{ state_attr('sensor.pumpsteer_future_strategy', 'inertia')
  }}`

  ðŸŽ¯ **Lead time:** `{{ state_attr('sensor.pumpsteer_future_strategy',
  'lead_time_hours') }}h`

  ðŸš€ **Aggressiveness:** `{{ state_attr('sensor.pumpsteer_future_strategy',
  'aggressiveness') }}`


#######################################################

type: history-graph
entities:
  - entity: sensor.pumpsteer
  - entity: sensor.temperatur_nu ## Ã„ndra till din utetemperatur 

  #####################################################

  type: custom:apexcharts-card
card_mod:
  style: |
    ha-card {
      width: 100%;
    }
graph_span: 12h
header:
  show: true
  title: Temperaturer - Ã–versikt
  show_states: true
  colorize_states: true
span:
  end: day
update_interval: 1min
cache: true
series:
  - entity: sensor.pumpsteer
    name: Virtuell UteTemp
    color: "#FF6347"
    stroke_width: 3
    opacity: 1
    type: line
    show:
      legend_value: false
      in_header: true
      in_chart: true
      in_legend: true
  - entity: sensor.temperatur_nu
    name: UteTemp (Verklig)
    color: "#4682B4"
    stroke_width: 2
    opacity: 0.7
    type: line
    show:
      legend_value: false
      in_header: true
      in_chart: true
      in_legend: true
  - entity: sensor.temp_hall_nere_temperature
    name: InneTemp (Verklig)
    color: "#32CD32"
    stroke_width: 2
    opacity: 0.8
    type: line
    show:
      legend_value: false
      in_header: true
      in_chart: true
      in_legend: true
  - entity: input_number.indoor_target_temperature
    name: MÃ¥ltemp
    stroke_width: 2
    opacity: 0.9
    type: line
    curve: stepline
    show:
      in_header: false
      legend_value: false
      in_chart: true
      in_legend: true
now:
  show: true
  label: Nu
yaxis:
  - id: temp
    min: auto
    max: auto
    decimals: 1
