type: vertical-stack
cards:
  - type: entities
    title: PumpSteer Controls
    show_header_toggle: false
    entities:
      - entity: input_number.pumpsteer_aggressiveness
        name: Aggressiveness (0â€“5)
      - entity: input_number.indoor_target_temperature
        name: Target Temperature
      - entity: input_number.pumpsteer_summer_threshold
        name: Summer Mode Threshold
      - entity: input_boolean.pumpsteer_summer_mode
        name: Summer Mode Active?
      - entity: input_text.hourly_forecast_temperatures
        name: Forecast Data (raw)
        secondary_info: last-updated
      - entity: input_number.house_inertia
        secondary_info: last-changed
      - entity: sensor.indoor_temperature_delta
        secondary_info: last-changed
      - entity: sensor.pumpsteer
        secondary_info: last-changed
      - entity: sensor.temperatur_nu
        secondary_info: last-changed
      - entity: sensor.temp_hall_nere_temperature
        secondary_info: last-changed
      - entity: number.ohmigohass_temperature
        secondary_info: last-changed
  - type: custom:apexcharts-card
    header:
      title: PumpSteer Gasa / Bromsa
      show: true
    graph_span: 24h
    span:
      start: day
    apex_config:
      chart:
        height: 300px
        type: line
      yaxis:
        - title:
            text: Temperatur (Â°C)
    series:
      - entity: sensor.pumpsteer
        name: Virtual Outdoor Temp
        type: line
        color: "#0077FF"
      - entity: sensor.real_outdoor_temperature
        name: Real Outdoor Temp
        type: line
        color: "#777777"
      - entity: sensor.pumpsteer_tempdiff
        name: Boost/Block Effect
        type: column
        color_threshold:
          - value: -0.1
            color: "#0077FF"
          - value: 0.1
            color: "#AAAAAA"
          - value: 100
            color: "#FF4444"
        stroke_width: 0
        group_by:
          func: avg
          duration: 10min
  - type: markdown
    content: >
      ### ðŸ§  pumpsteer Status

      **Mode:** {{ state_attr('sensor.pumpsteer', 'mode') }}

      **Indoor Temp:** {{ state_attr('sensor.pumpsteer',
      'indoor_temperature') }} Â°C   **Target Temp:** {{
      state_attr('sensor.pumpsteer', 'target_temperature') }} Â°C  
      **Electricity Price:** {{ state_attr('sensor.pumpsteer',
      'electricity_price') }} kr/kWh   **Aggressiveness:** {{
      state_attr('sensor.pumpsteer', 'aggressiveness') }}   **Temp
      Diff:** {{ state_attr('sensor.pumpsteer', 'difference_to_target')
      }} Â°C
