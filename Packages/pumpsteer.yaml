input_number:
  pumpsteer_aggressiveness:
    name: PumpSteer Aggressiveness
    min: 0
    max: 5
    step: 1
    unit_of_measurement: "level"
    icon: mdi:lightning-bolt-circle
    mode: box

  pumpsteer_summer_threshold:
    name: Summer Mode Threshold
    min: 0
    max: 30
    step: 0.5
    unit_of_measurement: "°C"
    mode: box

  preboost_max_outdoor_temp:
    name: Preboost max outdoor temp
    min: -5
    max: 20
    step: 0.5
    unit_of_measurement: "°C"
    mode: box

  indoor_target_temperature:
    name: Indoor Target Temperature
    min: 0
    max: 27
    step: 0.5
    unit_of_measurement: "°C"
    icon: mdi:thermometer
    mode: box

  house_inertia:
    name: House Inertia
    min: 0.1
    max: 10.0
    step: 0.1
#    unit_of_measurement: "x" 
    icon: mdi:home-thermometer
    mode: box

input_text:
  hourly_forecast_temperatures:
    name: Hourly Forecast Temperatures
    max: 255

input_boolean:
  pumpsteer_vacation_mode:
    name: Semestermode aktivt
    icon: mdi:beach

input_datetime:
  pumpsteer_vacation_start:
    name: Semester börjar
    has_date: true
    has_time: true

  pumpsteer_vacation_end:
    name: Semester slutar
    has_date: true
    has_time: true

template:
  - sensor:
      # Temperatur & inomhuslogik
      - name: "Real Outdoor Temperature"
        state: >
          {{ state_attr('sensor.pumpsteer', 'Ute (verklig)') }}
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "VirtualOutdoorTemp Tempdiff"
        state: >
          {% set fake = states('sensor.pumpsteer') | float %}
          {% set real = state_attr('sensor.pumpsteer', 'Ute (verklig)') | float %}
          {{ (fake - real) | round(1) }}
        unit_of_measurement: "°C"
        icon: mdi:thermometer-minus

      - name: "PumpSteer Indoor Target Diff"
        state: >
          {% set actual = state_attr('sensor.pumpsteer', 'Inne (verklig)') | float %}
          {% set target = state_attr('sensor.pumpsteer', 'Inne (mål)') | float %}
          {{ (actual - target) | round(1) }}
        unit_of_measurement: "°C"
        icon: mdi:home-thermometer-outline

      - name: "PumpSteer Operating Mode"
        state: >
          {{ state_attr('sensor.pumpsteer', 'Läge') | title }}
        icon: >
          {% set mode = state_attr('sensor.pumpsteer', 'Läge') %}
          {% if mode == 'preboost' %}
            mdi:flash
          {% elif mode == 'balance' %}
            mdi:swap-vertical
          {% elif mode == 'neutral' %}
            mdi:pause-circle
          {% elif mode == 'summer_mode' %}
            mdi:weather-sunny
          {% else %}
            mdi:help-circle
          {% endif %}

      # Forecast / strategi-attribut från PumpSteer
      - name: "PumpSteer Preboost Expected"
        unit_of_measurement: "hours"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'preboost_expected_in_hours') }}"
        icon: mdi:timer-outline
        state_class: measurement

      - name: "PumpSteer Cold Expensive Hours Next 6h"
        unit_of_measurement: "hours"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'cold_and_expensive_hours_next_6h') }}"
        icon: mdi:thermometer-minus
        state_class: measurement

      - name: "PumpSteer Expensive Hours Next 6h"
        unit_of_measurement: "hours"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'expensive_hours_next_6h') }}"
        icon: mdi:cash-multiple
        state_class: measurement

      - name: "PumpSteer Braking Price Threshold"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'braking_price_threshold_percent') }}"
        icon: mdi:line-scan
        state_class: measurement

      - name: "PumpSteer Preboost Price Threshold"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'preboost_price_threshold_percent') }}"
        icon: mdi:line-scan
        state_class: measurement

      - name: "PumpSteer Inertia"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'inertia') }}"
        icon: mdi:speedometer
        state_class: measurement

      - name: "PumpSteer Lead Time"
        unit_of_measurement: "hours"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'lead_time_hours') }}"
        icon: mdi:timer-sand
        state_class: measurement

      - name: "PumpSteer Aggressiveness"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'aggressiveness') }}"
        icon: mdi:target
        state_class: measurement

      - name: "PumpSteer Strategy Status"
        state: "{{ state_attr('sensor.pumpsteer_future_strategy', 'strategy_status') }}"
        icon: mdi:check-circle-outline
